<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <title>上传到sm.ms</title>  
    <style>  
        #uploadButton {  
            display: block;  
            margin: 20px auto;  
            padding: 10px 20px;  
            font-size: 16px;  
            color: white;  
            background-color: #4CAF50;  
            border: none;  
            border-radius: 5px;  
            cursor: pointer;  
        }  
    </style>  
</head>  
<body>  
  
<h1>上传到sm.ms</h1>  
<input type="file" id="imageUpload" accept="image/*" style="display: none;">  
<button id="uploadButton">选择图片上传</button>  
<div id="uploadStatus"></div>  
  
<script>  
    const uploadButton = document.getElementById('uploadButton');  
    const imageUpload = document.getElementById('imageUpload');  
    const uploadStatus = document.getElementById('uploadStatus');  
  
    uploadButton.addEventListener('click', function() {  
        imageUpload.click();  
    });  
  
    imageUpload.addEventListener('change', async function() {  
        const file = this.files[0];  
        if (file) {  
            try {  
                const formData = new FormData();  
                formData.append('smfile', file);  
  
                // 在这里添加API密钥  
                const apiKey = 'U8LMfnndx5lMogyjLKh0TqgbFNkVKqGu'; // 替换为您的API密钥  
  
                const response = await fetch('https://sm.ms/api/v2/upload', {  
                    method: 'POST',  
                    body: formData,  
                    headers: {  
                        'Authorization': `Bearer ${apiKey}`, // 使用Bearer认证  
                        // 如果需要其他请求头，可以在这里添加  
                    },  
                });  
  
                if (response.ok) {  
                    const data = await response.json();  
                    uploadStatus.textContent = `上传成功！图片URL: ${data.data.url}`;  
                } else {  
                    uploadStatus.textContent = `上传失败，状态码: ${response.status}`;  
                }  
            } catch (error) {  
                uploadStatus.textContent = `发生错误: ${error.message}`;  
            }  
        }  
    });  
</script>  
  
</body>  
</html>